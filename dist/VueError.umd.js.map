{"version":3,"file":"VueError.umd.js","sources":["../src/error.js"],"sourcesContent":["\nfunction isPromise(ret) {\n    return (ret && typeof ret.then === 'function' && typeof ret.catch === \"function\")\n}\nconst errorHandler = (error, vm, info) => {\n    console.error('抛出全局异常')\n    console.error(vm)\n    console.error(error)\n    console.error(info)\n}\nfunction registerActionHandle(actions) {\n    Object.keys(actions).forEach(key => {\n        let fn = actions[key]\n        actions[key] = function (...args) {\n            let ret = fn.apply(this, args)\n            if (isPromise(ret)) {\n                return ret.catch(errorHandler)\n            } else { // 默认错误处理\n                return ret\n            }\n        }\n    })\n}\nconst registerVuex = (instance) => {\n    if (instance.$options['store']) {\n        let actions = instance.$options['store']['_actions'] || {}\n        if (actions) {\n            let tempActions = {}\n            Object.keys(actions).forEach(key => {\n                tempActions[key] = actions[key][0]\n            })\n            registerActionHandle(tempActions)\n        }\n    }\n}\nconst registerVue = (instance) => {\n    if (instance.$options.methods) {\n        let actions = instance.$options.methods || {}\n        if (actions) {\n            registerActionHandle(actions)\n        }\n    }\n}\n\nlet VueError = {\n    install: (Vue, options) => {\n        /**\n         * 全局异常处理\n         * @param {\n         * } error \n         * @param {*} vm \n         */\n        console.log('VueErrorInstallSuc')\n        Vue.config.errorHandler = errorHandler\n        Vue.mixin({\n            beforeCreate() {\n                registerVue(this)\n                registerVuex(this)\n            }\n        })\n        Vue.prototype.$throw = errorHandler\n    }\n}\n\nexport default VueError\n"],"names":[],"mappings":";;;;;;;;;;IACA,SAAS,SAAS,CAAC,GAAG,EAAE;IACxB,IAAI,QAAQ,GAAG,IAAI,OAAO,GAAG,CAAC,IAAI,KAAK,UAAU,IAAI,OAAO,GAAG,CAAC,KAAK,KAAK,UAAU,CAAC;IACrF,CAAC;IACD,MAAM,YAAY,GAAG,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,KAAK;IAC1C,IAAI,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAC;IAC3B,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE,EAAC;IACrB,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,EAAC;IACxB,IAAI,OAAO,CAAC,KAAK,CAAC,IAAI,EAAC;IACvB,EAAC;IACD,SAAS,oBAAoB,CAAC,OAAO,EAAE;IACvC,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI;IACxC,QAAQ,IAAI,EAAE,GAAG,OAAO,CAAC,GAAG,EAAC;IAC7B,QAAQ,OAAO,CAAC,GAAG,CAAC,GAAG,UAAU,GAAG,IAAI,EAAE;IAC1C,YAAY,IAAI,GAAG,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,EAAC;IAC1C,YAAY,IAAI,SAAS,CAAC,GAAG,CAAC,EAAE;IAChC,gBAAgB,OAAO,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC;IAC9C,aAAa,MAAM;IACnB,gBAAgB,OAAO,GAAG;IAC1B,aAAa;IACb,UAAS;IACT,KAAK,EAAC;IACN,CAAC;IACD,MAAM,YAAY,GAAG,CAAC,QAAQ,KAAK;IACnC,IAAI,IAAI,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;IACpC,QAAQ,IAAI,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,IAAI,GAAE;IAClE,QAAQ,IAAI,OAAO,EAAE;IACrB,YAAY,IAAI,WAAW,GAAG,GAAE;IAChC,YAAY,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI;IAChD,gBAAgB,WAAW,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAC;IAClD,aAAa,EAAC;IACd,YAAY,oBAAoB,CAAC,WAAW,EAAC;IAC7C,SAAS;IACT,KAAK;IACL,EAAC;IACD,MAAM,WAAW,GAAG,CAAC,QAAQ,KAAK;IAClC,IAAI,IAAI,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE;IACnC,QAAQ,IAAI,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,IAAI,GAAE;IACrD,QAAQ,IAAI,OAAO,EAAE;IACrB,YAAY,oBAAoB,CAAC,OAAO,EAAC;IACzC,SAAS;IACT,KAAK;IACL,EAAC;;IAED,IAAI,QAAQ,GAAG;IACf,IAAI,OAAO,EAAE,CAAC,GAAG,EAAE,OAAO,KAAK;IAC/B;IACA;IACA;IACA;IACA;IACA;IACA,QAAQ,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAC;IACzC,QAAQ,GAAG,CAAC,MAAM,CAAC,YAAY,GAAG,aAAY;IAC9C,QAAQ,GAAG,CAAC,KAAK,CAAC;IAClB,YAAY,YAAY,GAAG;IAC3B,gBAAgB,WAAW,CAAC,IAAI,EAAC;IACjC,gBAAgB,YAAY,CAAC,IAAI,EAAC;IAClC,aAAa;IACb,SAAS,EAAC;IACV,QAAQ,GAAG,CAAC,SAAS,CAAC,MAAM,GAAG,aAAY;IAC3C,KAAK;IACL,CAAC;;;;;;;;"}