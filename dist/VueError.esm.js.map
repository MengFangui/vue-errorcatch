{"version":3,"file":"VueError.esm.js","sources":["../src/error.js"],"sourcesContent":["\nfunction isPromise(ret) {\n    return (ret && typeof ret.then === 'function' && typeof ret.catch === \"function\")\n}\nconst errorHandler = (error, vm, info) => {\n    console.error('抛出全局异常')\n    console.error(vm)\n    console.error(error)\n    console.error(info)\n}\nfunction registerActionHandle(actions) {\n    Object.keys(actions).forEach(key => {\n        let fn = actions[key]\n        actions[key] = function (...args) {\n            let ret = fn.apply(this, args)\n            if (isPromise(ret)) {\n                return ret.catch(errorHandler)\n            } else { // 默认错误处理\n                return ret\n            }\n        }\n    })\n}\nconst registerVuex = (instance) => {\n    if (instance.$options['store']) {\n        let actions = instance.$options['store']['_actions'] || {}\n        if (actions) {\n            let tempActions = {}\n            Object.keys(actions).forEach(key => {\n                tempActions[key] = actions[key][0]\n            })\n            registerActionHandle(tempActions)\n        }\n    }\n}\nconst registerVue = (instance) => {\n    if (instance.$options.methods) {\n        let actions = instance.$options.methods || {}\n        if (actions) {\n            registerActionHandle(actions)\n        }\n    }\n}\n\nlet VueError = {\n    install: (Vue, options) => {\n        /**\n         * 全局异常处理\n         * @param {\n         * } error \n         * @param {*} vm \n         */\n        console.log('VueErrorInstallSuc')\n        Vue.config.errorHandler = errorHandler\n        Vue.mixin({\n            beforeCreate() {\n                registerVue(this)\n                registerVuex(this)\n            }\n        })\n        Vue.prototype.$throw = errorHandler\n    }\n}\n\nexport default VueError\n"],"names":[],"mappings":";;;;AACA,SAAS,SAAS,CAAC,GAAG,EAAE;IACpB,QAAQ,GAAG,IAAI,OAAO,GAAG,CAAC,IAAI,KAAK,UAAU,IAAI,OAAO,GAAG,CAAC,KAAK,KAAK,UAAU,CAAC;CACpF;AACD,MAAM,YAAY,GAAG,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,KAAK;IACtC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAC;IACvB,OAAO,CAAC,KAAK,CAAC,EAAE,EAAC;IACjB,OAAO,CAAC,KAAK,CAAC,KAAK,EAAC;IACpB,OAAO,CAAC,KAAK,CAAC,IAAI,EAAC;EACtB;AACD,SAAS,oBAAoB,CAAC,OAAO,EAAE;IACnC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI;QAChC,IAAI,EAAE,GAAG,OAAO,CAAC,GAAG,EAAC;QACrB,OAAO,CAAC,GAAG,CAAC,GAAG,UAAU,GAAG,IAAI,EAAE;YAC9B,IAAI,GAAG,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,EAAC;YAC9B,IAAI,SAAS,CAAC,GAAG,CAAC,EAAE;gBAChB,OAAO,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC;aACjC,MAAM;gBACH,OAAO,GAAG;aACb;UACJ;KACJ,EAAC;CACL;AACD,MAAM,YAAY,GAAG,CAAC,QAAQ,KAAK;IAC/B,IAAI,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;QAC5B,IAAI,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,IAAI,GAAE;QAC1D,IAAI,OAAO,EAAE;YACT,IAAI,WAAW,GAAG,GAAE;YACpB,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI;gBAChC,WAAW,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAC;aACrC,EAAC;YACF,oBAAoB,CAAC,WAAW,EAAC;SACpC;KACJ;EACJ;AACD,MAAM,WAAW,GAAG,CAAC,QAAQ,KAAK;IAC9B,IAAI,QAAQ,CAAC,QAAQ,CAAC,OAAO,EAAE;QAC3B,IAAI,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,IAAI,GAAE;QAC7C,IAAI,OAAO,EAAE;YACT,oBAAoB,CAAC,OAAO,EAAC;SAChC;KACJ;EACJ;;AAED,IAAI,QAAQ,GAAG;IACX,OAAO,EAAE,CAAC,GAAG,EAAE,OAAO,KAAK;;;;;;;QAOvB,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAC;QACjC,GAAG,CAAC,MAAM,CAAC,YAAY,GAAG,aAAY;QACtC,GAAG,CAAC,KAAK,CAAC;YACN,YAAY,GAAG;gBACX,WAAW,CAAC,IAAI,EAAC;gBACjB,YAAY,CAAC,IAAI,EAAC;aACrB;SACJ,EAAC;QACF,GAAG,CAAC,SAAS,CAAC,MAAM,GAAG,aAAY;KACtC;CACJ;;;;"}